---
import BaseLayout from '../layouts/BaseLayout.astro';
import CategoryNav from '../components/CategoryNav.astro';
import NewsCard from '../components/NewsCard.astro';

import techNews from '../data/news/tech.json';
import aiNews from '../data/news/ai.json';
import economicNews from '../data/news/economic.json';
import githubNews from '../data/news/github.json';
import sportsNews from '../data/news/sports.json';

const categoryData: Record<string, { label: string; articles: typeof techNews }> = {
  tech: { label: 'Tech', articles: techNews },
  ai: { label: 'AI', articles: aiNews },
  economic: { label: 'Economic', articles: economicNews },
  github: { label: 'GitHub', articles: githubNews },
  sports: { label: 'Sports', articles: sportsNews },
};

export function getStaticPaths() {
  return ['tech', 'ai', 'economic', 'github', 'sports'].map(category => ({
    params: { category },
  }));
}

const { category } = Astro.params;
const data = categoryData[category!];
const articles = data.articles.sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());
---
<BaseLayout title={`${data.label} - Oscar's News`}>
  <CategoryNav active={category} />
  {articles.map(article => (
    <NewsCard
      title={article.title}
      url={article.url}
      source={article.source}
      date={article.date}
      summary={article.summary}
    />
  ))}
</BaseLayout>
